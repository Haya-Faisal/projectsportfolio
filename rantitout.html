<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rant it Out </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; color: #1a1a1a; background: #fff; line-height: 1.6; }
        body { max-width: 1200px; margin: 0 auto; padding: 40px 24px; }
        
        h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; }
        h2 { font-size: 1.5rem; font-weight: 600; margin-top: 3rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #eaeaea; }
        h3 { font-size: 1.1rem; font-weight: 600; margin-top: 2rem; margin-bottom: 0.75rem; color: #800020; }
        p, li { margin-bottom: 0.8rem; }
        a { color: #800020; text-decoration: none; }
        a:hover { text-decoration: underline; }
        
        .project-links { display: flex; gap: 1rem; margin: 1rem 0 2rem 0; flex-wrap: wrap; }
        .project-link { display: inline-flex; align-items: center; gap: 0.5rem; color: #800020; font-size: 0.95rem; padding: 0.5rem 1rem; background-color: rgba(156, 39, 176, 0.08); border-radius: 6px; border: 1px solid rgba(156, 39, 176, 0.15); transition: all 0.2s ease; }
        .project-link:hover { background-color: rgba(156, 39, 176, 0.12); text-decoration: none; }
        
        .back-link { display: inline-block; margin-bottom: 3rem; font-weight: 500; }
        .meta-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin: 2.5rem 0; }
        .meta-item h4 { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; color: #666; margin-bottom: 0.5rem; }
        .meta-item p { font-size: 1rem; }
        
        ul, ol { padding-left: 1.5rem; margin-bottom: 1.5rem; }
        li { margin-bottom: 0.5rem; }
        
        pre { background-color: #f5f5f5; border-radius: 6px; padding: 1.2rem; margin: 1.5rem 0; overflow-x: auto; font-family: 'Courier New', Courier, monospace; font-size: 0.9rem; line-height: 1.5; border-left: 4px solid #ddd; }
        code { font-family: 'Courier New', Courier, monospace; background: #f5f5f5; padding: 0.2em 0.4em; border-radius: 3px; font-size: 0.9em; color: #c80064; }
        
        .tag { display: inline-block; background: #f3e5f5; color: #800020; padding: 0.3em 0.8em; border-radius: 20px; font-size: 0.85rem; margin-right: 0.5rem; margin-bottom: 0.5rem; }
        .algorithm-box { background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0; border-left: 4px solid #ddd; }
        
        @media (max-width: 768px) { body { padding: 30px 20px; } h1 { font-size: 2rem; } .meta-grid { grid-template-columns: 1fr; gap: 1.5rem; } .project-links { gap: 0.75rem; } }
    </style>
</head>
<body>
    <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Back</a>

    <header>
        <h1>Rant it Out </h1>
        
        <div class="project-links">
            <a href="https://editor.p5js.org/Haya-Faisal/sketches/5W9ESFahe" class="project-link" target="_blank" rel="noopener noreferrer">
                <i class="fas fa-code"></i> Code 
            </a>
            <a href="https://editor.p5js.org/Haya-Faisal/full/5W9ESFahe" class="project-link" target="_blank" rel="noopener noreferrer">
                <i class="fas fa-external-link-alt"></i> Live Demo
            </a>
        </div>
        
       
    </header>

    <main>
        <section class="meta-grid">
            <div class="meta-item">
                <h4>Impact</h4>
                <p>Created an immersive emotional expression tool that visualizes vocal patterns in real-time, making abstract audio characteristics tangible.</p>
            </div>
            <div class="meta-item">
                <h4>Tools</h4>
                <p>p5.js, Web Audio API, Canvas API, Vanilla JavaScript</p>
            </div>
            <div class="meta-item">
                <h4>Timeline</h4>
                <p>Apr 2025 - May 2025</p>
            </div>
        </section>

        <section>
            <h2>Core Features</h2>

            <h3>Real-time Audio Analysis System</h3>
            <ul>
                <li><strong>FFT Processing:</strong> 1024-point FFT with 0.8 smoothing factor for stable analysis.</li>
                <li><strong>Pitch Detection:</strong> Frequency spectrum analysis in human voice range (85-300Hz).</li>
                <li><strong>Volume Thresholding:</strong> Voice activation with 0.02 minimum loudness detection.</li>
                <li><strong>Spectral Centroid:</strong> Calculates audio brightness (100-3000Hz range).</li>
            </ul>

            <h3>Dynamic Flow Field Generation</h3>
            <ul>
                <li><strong>Perlin Noise Vectors:</strong> Configurable 30px resolution flow field.</li>
                <li><strong>Time-evolving Patterns:</strong> Dual-frequency animation (0.003 spatial/temporal).</li>
                <li><strong>Efficient Grid System:</strong> Pre-calculated angles for O(1) vector lookup.</li>
                <li><strong>Debug Visualization:</strong> Toggle for field line visualization.</li>
            </ul>

            <h3>Voice-Reactive Boid Swarm</h3>
            <ul>
                <li><strong>Flocking Algorithm:</strong> Implements Craig Reynolds' separation, alignment, cohesion.</li>
                <li><strong>Audio-modulated Parameters:</strong> Speed and steering forces respond to volume.</li>
                <li><strong>Object Pool Management:</strong> Automatic cleanup maintaining maximum 250 boids.</li>
                <li><strong>Mouse Seeking:</strong> Interactive target following behavior.</li>
            </ul>

            <h3>Voice-based Color System</h3>
            <ul>
                <li><strong>Pitch-based Palettes:</strong> Deep voices (<160Hz) use dark red/orange; high voices (>200Hz) use purple/blue.</li>
                <li><strong>Spectral Weighting:</strong> Line thickness varies with audio centroid.</li>
                <li><strong>Real-time Assignment:</strong> Individual boid coloring based on current audio input.</li>
            </ul>
        </section>

        <section>
            <h2>Technical Implementation</h2>

            <h3>Audio Processing Pipeline</h3>
            <pre><code>// Audio initialization and analysis
const mic = new p5.AudioIn();
const fft = new p5.FFT(0.8, 1024); // 1024-point FFT with 0.8 smoothing

// Real-time analysis in draw loop
let spectrum = fft.analyze();
let volume = mic.getLevel();
let centroid = fft.getCentroid();
let dominantPitch = findDominantPitch(spectrum, 85, 300);</code></pre>

            <h3>Perlin Noise Flow Field</h3>
            <pre><code>class FlowField {
  constructor(resolution, freqPos, freqTime) {
    this.resolution = resolution;      // 30px grid spacing
    this.freqPos = freqPos;            // 0.003 spatial frequency
    this.freqTime = freqTime;          // 0.003 temporal frequency
    this.cols = ceil(width / resolution);
    this.rows = ceil(height / resolution);
    this.angles = [];                  // Vector field storage
  }

  update() {
    // Generate Perlin noise-based angles for entire grid
    for (let r = 0; r < this.rows; r++) {
      for (let c = 0; c < this.cols; c++) {
        let x = c * this.resolution;
        let y = r * this.resolution;
        let noiseValue = noise(
          x * this.freqPos + frameCount * this.freqTime,
          y * this.freqPos + frameCount * this.freqTime
        );
        let angle = map(noiseValue, 0, 1, 0, TWO_PI * 4);
        this.angles.push(angle);
      }
    }
  }
}</code></pre>

            <h3>Flocking Behavior System</h3>
            <pre><code>class Boid {
  constructor(randcolor, x, y, sizey) {
    this.pos = createVector(x, y);     // Position vector
    this.vel = createVector(0, 0);     // Velocity vector
    this.acc = createVector(0, 0);     // Acceleration vector
    this.maxSpeed = 1;                 // Base movement speed
    this.maxSteerForce = 0.2;          // Maximum turning force

    // Flocking parameters
    this.separateDistance = 40;        // Personal space radius
    this.neighborDistance = 60;        // Social interaction radius
    this.mass = 1;                     // For force calculations
  }

  flock(others) {
    // Composite behavior from multiple steering forces
    let seekForce = this.seek(createVector(mouseX, mouseY));
    let sepaForce = this.separate(others);
    let coheForce = this.cohesion(others);
    let aligForce = this.align(others);

    // Audio-reactive parameter modulation
    this.maxSpeed = map(volume, 0, 0.2, 1, 8);
    this.maxSteerForce = map(volume, 0, 0.2, 0.05, 0.25);

    // Weighted force application
    this.applyForce(seekForce.mult(0.5));
    this.applyForce(sepaForce.mult(map(volume, 0, 0.5, 0.1, 5.0)));
    this.applyForce(coheForce.mult(map(volume, 0, 0.5, 1.0, 0.01, true)));
    this.applyForce(aligForce);
  }
}</code></pre>

            <h3>Pitch Detection Algorithm</h3>
            <pre><code>function findDominantPitch(spectrum, minHz, maxHz) {
  let nyquist = sampleRate() / 2;                    // 22050Hz typical
  let minBin = floor((minHz / nyquist) * spectrum.length);  // ~4 bins at 85Hz
  let maxBin = floor((maxHz / nyquist) * spectrum.length);  // ~14 bins at 300Hz

  let maxEnergy = 0;
  let dominantPitch = 0;

  for (let i = minBin; i <= maxBin; i++) {
    if (spectrum[i] > maxEnergy) {
      maxEnergy = spectrum[i];
      dominantPitch = (i / spectrum.length) * nyquist;
    }
  }
  return dominantPitch;
}</code></pre>
        </section>

        <section>
            <h2>Performance Optimizations</h2>
            
            <div class="algorithm-box">
                <h3>Computational Efficiency</h3>
                <ul>
                    <li><strong>Grid Optimization:</strong> 30px fixed resolution with O(1) vector lookup (~3800 cells at 1900×1800).</li>
                    <li><strong>Object Pooling:</strong> Maximum 250 boids with automatic cleanup.</li>
                    <li><strong>Frequency Limiting:</strong> Analyzes only relevant human voice range (85-300Hz).</li>
                    <li><strong>Point-based Rendering:</strong> Uses <code>point()</code> for minimal GPU overhead.</li>
                </ul>
            </div>

            <h3>Audio Processing Optimizations</h3>
            <ul>
                <li><strong>Pitch Smoothing:</strong> Exponential smoothing reduces detection jitter.</li>
                <li><strong>Volume Thresholding:</strong> Ignores background noise below 0.02 level.</li>
                <li><strong>Time-based Activation:</strong> Only spawns boids when voice is detected.</li>
                <li><strong>Background Fading:</strong> Gradual visual fade during silence periods.</li>
            </ul>

            <h3>Performance Metrics</h3>
            <ul>
                <li><strong>Target FPS:</strong> 60 frames per second.</li>
                <li><strong>Audio Analysis:</strong> ~16ms per frame (FFT + feature extraction).</li>
                <li><strong>Boid Updates:</strong> ~8ms for 250 boids with flocking behaviors.</li>
                <li><strong>Memory Usage:</strong> ~65KB for data structures + 13MB canvas buffer.</li>
            </ul>
        </section>

        <section>
            <h2>Development Challenges & Solutions</h2>
            
            <h3>Challenge: Real-time Audio Latency</h3>
            <p><strong>Solution:</strong> Implemented FFT with 0.8 smoothing factor and pitch smoothing algorithm to reduce jitter while maintaining responsiveness.</p>

            <h3>Challenge: Performance with Many Boids</h3>
            <p><strong>Solution:</strong> Used O(n²) flocking algorithm but limited to 250 boids with automatic cleanup, plus audio-controlled population management.</p>

            <h3>Challenge: Visual Clarity with Many Elements</h3>
            <p><strong>Solution:</strong> Implemented point-based rendering with variable weight based on spectral centroid, creating clear visual hierarchy.</p>

            <h3>Challenge: Natural-looking Flocking</h3>
            <p><strong>Solution:</strong> Combined Reynolds' algorithm with Perlin noise flow field and audio modulation for organic, voice-reactive motion.</p>
        </section>        
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Update back link if no referrer
            const backLink = document.querySelector('.back-link');
            if (!document.referrer) {
                backLink.href = "/";
                backLink.textContent = "← Back to Portfolio";
            }
        });
    </script>
</body>
</html>